import{a,w as R,u as g,m as f,j as r,e as B,x as T}from"./index-CXStaru4.js";const _="_RedirBox_182ts_1",b="_RedirText_182ts_13",o={RedirBox:_,RedirText:b},v=()=>{const[s,c]=a.useState(""),[n]=R(),i=g(),t=f();return a.useEffect(()=>{c(n.get("token"));const u=async()=>{s===null&&t("/login",{replace:!0});try{const e=await B.get("https://kapusta-backend-827563b0830f.herokuapp.com/api/auth/current",{headers:{Authorization:`Bearer ${s}`}});if(e.status===200){const d=e.data.user,{name:l,email:p,balance:x,avatarUrl:h}=d,k=!0,m=e.data.token;i(T({isLoggedIn:k,name:l,email:p,balance:x,avatarUrl:h,token:m})),t("/",{replace:!1})}else t("/",{replace:!0})}catch(e){console.error("Błąd:",e),t("/",{replace:!0})}};a.startTransition(()=>{u()})},[s]),r.jsx("div",{className:o.RedirBox,children:r.jsx("b",{className:o.RedirText,children:"Redirecting..."})})};export{v as default};
