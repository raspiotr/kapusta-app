import{a,u as f,l as k,j as r,e as g,v as B}from"./index-aW30RZZe.js";import{u as T}from"./index-BHc2uzef.js";const _="_RedirBox_182ts_1",v="_RedirText_182ts_13",o={RedirBox:_,RedirText:v},E=()=>{const[s,c]=a.useState(""),[n]=T(),i=f(),t=k();return a.useEffect(()=>{c(n.get("token"));const u=async()=>{s===null&&t("/login",{replace:!0});try{const e=await g.get("https://kapusta-app-eafad5d610ef.herokuapp.com/api/auth/current",{headers:{Authorization:`Bearer ${s}`}});if(e.status===200){const d=e.data.user,{name:l,email:p,balance:x,avatarUrl:h}=d,m=!0,R=e.data.token;i(B({isLoggedIn:m,name:l,email:p,balance:x,avatarUrl:h,token:R})),t("/",{replace:!1})}else t("/",{replace:!0})}catch(e){console.error("Błąd:",e),t("/",{replace:!0})}};a.startTransition(()=>{u()})},[s]),r.jsx("div",{className:o.RedirBox,children:r.jsx("b",{className:o.RedirText,children:"Redirecting..."})})};export{E as default};
