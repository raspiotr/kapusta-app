import{a,v as m,u as f,l as g,j as r,e as B,w as T}from"./index-CCsdEbBz.js";const _="_RedirBox_182ts_1",v="_RedirText_182ts_13",o={RedirBox:_,RedirText:v},U=()=>{const[s,c]=a.useState(""),[n]=m(),i=f(),t=g();return a.useEffect(()=>{c(n.get("token"));const d=async()=>{s===null&&t("/login",{replace:!0});try{const e=await B.get("https://kapusta-app-eafad5d610ef.herokuapp.com/api/auth/current",{headers:{Authorization:`Bearer ${s}`}});if(e.status===200){const u=e.data.user,{name:l,email:p,balance:x,avatarUrl:h}=u,R=!0,k=e.data.token;i(T({isLoggedIn:R,name:l,email:p,balance:x,avatarUrl:h,token:k})),t("/",{replace:!1})}else t("/",{replace:!0})}catch(e){console.error("Błąd:",e),t("/",{replace:!0})}};a.startTransition(()=>{d()})},[s]),r.jsx("div",{className:o.RedirBox,children:r.jsx("b",{className:o.RedirText,children:"Redirecting..."})})};export{U as default};
